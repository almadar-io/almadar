{
  "name": "relations-test",
  "version": "1.0.0",
  "description": "Test: Entity relations (one-to-many, many-to-one)",
  "orbitals": [
    {
      "name": "AuthorManager",
      "entity": {
        "name": "Author",
        "persistence": "persistent",
        "collection": "authors",
        "fields": [
          { "name": "id", "type": "string", "required": true },
          { "name": "name", "type": "string", "required": true },
          { "name": "email", "type": "string" }
        ]
      },
      "traits": [
        {
          "name": "AuthorBrowser",
          "linkedEntity": "Author",
          "category": "interaction",
          "stateMachine": {
            "states": [{ "name": "browsing", "isInitial": true }],
            "events": [{ "key": "INIT", "name": "Initialize" }],
            "transitions": [{
              "from": "browsing",
              "event": "INIT",
              "to": "browsing",
              "effects": [
                ["fetch", "Author"],
                ["render-ui", "main", {
                  "type": "entity-table",
                  "props": {
                    "entity": "Author",
                    "columns": ["name", "email"],
                    "itemActions": [{ "event": "VIEW", "label": "View" }]
                  }
                }]
              ]
            }]
          }
        }
      ],
      "pages": [
        {
          "name": "AuthorListPage",
          "path": "/authors",
          "traits": [{ "ref": "AuthorBrowser", "linkedEntity": "Author" }]
        }
      ]
    },
    {
      "name": "BookManager",
      "entity": {
        "name": "Book",
        "persistence": "persistent",
        "collection": "books",
        "fields": [
          { "name": "id", "type": "string", "required": true },
          { "name": "title", "type": "string", "required": true },
          { "name": "isbn", "type": "string" },
          { "name": "publishedYear", "type": "number" },
          { "name": "authorId", "type": "string", "required": true }
        ]
      },
      "traits": [
        {
          "name": "BookBrowser",
          "linkedEntity": "Book",
          "category": "interaction",
          "stateMachine": {
            "states": [{ "name": "browsing", "isInitial": true }],
            "events": [{ "key": "INIT", "name": "Initialize" }],
            "transitions": [{
              "from": "browsing",
              "event": "INIT",
              "to": "browsing",
              "effects": [
                ["fetch", "Book"],
                ["render-ui", "main", {
                  "type": "entity-table",
                  "props": {
                    "entity": "Book",
                    "columns": ["title", "isbn", "publishedYear"],
                    "itemActions": [{ "event": "VIEW", "label": "View" }]
                  }
                }]
              ]
            }]
          }
        }
      ],
      "pages": [
        {
          "name": "BookListPage",
          "path": "/books",
          "traits": [{ "ref": "BookBrowser", "linkedEntity": "Book" }]
        }
      ]
    },
    {
      "name": "CategoryManager",
      "entity": {
        "name": "Category",
        "persistence": "persistent",
        "collection": "categories",
        "fields": [
          { "name": "id", "type": "string", "required": true },
          { "name": "name", "type": "string", "required": true }
        ]
      },
      "traits": [],
      "pages": [
        {
          "name": "CategoryListPage",
          "path": "/categories"
        }
      ]
    }
  ]
}
