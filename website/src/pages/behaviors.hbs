---
title: Standard Behaviors Reference
description: Complete reference for all Orbital Standard Behaviors.
layout: stdlib
---

<section id="behaviors-reference">
    <h1 class="gradient-text">Standard Behaviors Reference</h1>
    <p>
        Standard Behaviors are <strong>composable state machine fragments</strong> that encode
        common interaction logic with embedded UI via <code>render_ui</code> effects. Reference
        them using <code>{ "ref": "std/BehaviorName" }</code>.
    </p>

    <div class="info-box tip">
        <div class="info-box-title">üí° Interactive Diagrams</div>
        <p>Click "View State Machine" to visualize the behavior's states and transitions.</p>
    </div>

    <!-- Quick Search (mobile) -->
    <div class="mobile-search">
        <input type="text" id="mobile-search" placeholder="Search behaviors...">
    </div>
</section>

<!-- Category Sections (populated by JavaScript) -->
<div id="categories-container"></div>

<!-- State Machine Visualizer Modal -->
<div id="visualizer-modal" class="visualizer-modal">
    <div class="visualizer-modal-content">
        <div class="visualizer-header">
            <h3 id="visualizer-title">State Machine</h3>
            <button class="visualizer-close" onclick="closeVisualizer()">&times;</button>
        </div>
        <div id="visualizer-container" class="visualizer-container"></div>
    </div>
</div>

<!-- Load the Orbital Visualizer -->
<script src="js/orbital-visualizer.js"></script>

<!-- Load and render documentation -->
<script>
    let allBehaviorsData = null;

    document.addEventListener('DOMContentLoaded', async function () {
        try {
            // Load the generated JSON data
            const response = await fetch('data/stdlib-behaviors.json');
            const data = await response.json();
            allBehaviorsData = data;

            // Build sidebar navigation
            buildSidebar(data.categories);

            // Render categories
            const container = document.getElementById('categories-container');
            container.innerHTML = data.categories.map(renderCategory).join('');

            // Setup search
            setupSearch();

            // Setup scroll spy
            setupScrollSpy();

        } catch (error) {
            console.error('Failed to load behaviors documentation:', error);
        }
    });

    function buildSidebar(categories) {
        const nav = document.getElementById('sidebar-nav');
        nav.innerHTML = categories.map(cat => `
        <div class="sidebar-section">
            <a href="#${cat.id}" class="sidebar-link" data-category="${cat.id}">
                <span class="icon">${cat.icon}</span>
                <span>${cat.name}</span>
                <span class="count">${cat.behaviorCount}</span>
            </a>
        </div>
    `).join('');
    }

    function setupSearch() {
        const sidebarSearch = document.getElementById('sidebar-search');
        const mobileSearch = document.getElementById('mobile-search');

        const doSearch = (query) => {
            const q = query.toLowerCase().trim();

            if (!q) {
                // Show all
                document.querySelectorAll('.behavior-card').forEach(card => {
                    card.style.display = '';
                });
                document.querySelectorAll('.category-section').forEach(section => {
                    section.style.display = '';
                });
                return;
            }

            // Filter behaviors
            document.querySelectorAll('.behavior-card').forEach(card => {
                const name = card.dataset.name?.toLowerCase() || '';
                const desc = card.dataset.desc?.toLowerCase() || '';
                if (name.includes(q) || desc.includes(q)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });

            // Show/hide categories based on visible behaviors
            document.querySelectorAll('.category-section').forEach(section => {
                const hasVisible = section.querySelectorAll('.behavior-card:not([style*="display: none"])').length > 0;
                section.style.display = hasVisible ? '' : 'none';
            });
        };

        if (sidebarSearch) {
            sidebarSearch.addEventListener('input', (e) => doSearch(e.target.value));
        }
        if (mobileSearch) {
            mobileSearch.addEventListener('input', (e) => doSearch(e.target.value));
        }
    }

    function setupScrollSpy() {
        const sections = document.querySelectorAll('.category-section');
        const navLinks = document.querySelectorAll('.sidebar-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: '-20% 0px -70% 0px' });

        sections.forEach(section => observer.observe(section));
    }

    function renderCategory(category) {
        return `
        <section id="${category.id}" class="category-section">
            <h2>
                <span class="category-icon">${category.icon}</span>
                ${category.name}
            </h2>
            <p>${category.description}</p>
            <p class="category-meta">${category.behaviorCount} behaviors</p>
            
            <div class="behaviors-grid">
                ${category.behaviors.map(renderBehavior).join('')}
            </div>
        </section>
    `;
    }

    function renderBehavior(behavior) {
        const behaviorId = behavior.shortName.replace(/[^a-zA-Z0-9]/g, '_');
        const sourceCode = behavior.sourceCode || 'No source code available';

        return `
        <div class="behavior-card" data-name="${behavior.name}" data-desc="${behavior.description}" data-behavior='${JSON.stringify(behavior.stateMachine || {})}'>
            <div class="behavior-header">
                <code class="behavior-name">${behavior.name}</code>
                <div class="header-buttons">
                    ${behavior.sourceCode ? `
                        <button class="code-btn" onclick="toggleCode('${behaviorId}')" title="View Source Code">
                            <span class="code-icon">üìÑ</span> Code
                        </button>
                    ` : ''}
                    ${behavior.stateMachine ? `
                        <button class="visualizer-btn" onclick="showVisualizer('${behavior.name}', this)" title="View State Machine">
                            <span class="visualizer-icon">‚ö°</span> Diagram
                        </button>
                    ` : ''}
                </div>
            </div>
            <p class="behavior-description">${behavior.description}</p>
            
            <div class="behavior-details">
                <div class="detail-section">
                    <div class="detail-label">States (${behavior.statesCount})</div>
                    <div class="state-chips">
                        ${behavior.states.map(s => `
                            <span class="state-chip${s === behavior.initial ? ' initial' : ''}">${s}${s === behavior.initial ? ' ‚óè' : ''}</span>
                        `).join('')}
                    </div>
                </div>
                
                <div class="detail-section">
                    <div class="detail-label">Events (${behavior.eventsCount})</div>
                    <div class="event-chips">
                        ${behavior.events.map(e => `<span class="event-chip">${e}</span>`).join('')}
                    </div>
                </div>
                
                ${behavior.dataEntities && behavior.dataEntities.length > 0 ? `
                    <div class="detail-section">
                        <div class="detail-label">Data Entities</div>
                        <div class="entities-list">
                            ${behavior.dataEntities.map(e => `
                                <div class="entity-item">
                                    <span class="entity-name">üì¶ ${e.name}</span>
                                    <span class="entity-fields">${e.fields.map(f => f.name + ': ' + f.type).join(', ')}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
                
                ${behavior.ticks && behavior.ticks.length > 0 ? `
                    <div class="detail-section">
                        <div class="detail-label">Ticks (Frame Execution)</div>
                        <div class="ticks-list">
                            ${behavior.ticks.map(t => `
                                <div class="tick-item">
                                    <span class="tick-name">‚è±Ô∏è ${t.name}</span>
                                    <span class="tick-interval">@ ${t.interval === 'frame' ? 'every frame' : t.interval + 'ms'}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
                
                ${behavior.suggestedFor.length > 0 ? `
                    <div class="detail-section">
                        <div class="detail-label">Use Cases</div>
                        <div class="suggested-list">
                            ${behavior.suggestedFor.map(s => `<span class="suggested-chip">${s}</span>`).join('')}
                        </div>
                    </div>
                ` : ''}
            </div>
            
            <!-- Source Code Section (collapsed by default) -->
            <div id="code-${behaviorId}" class="code-section" style="display: none;">
                <div class="code-header">
                    <span class="code-label">Behavior Definition</span>
                    <button class="copy-btn" onclick="copyCode('${behaviorId}')" title="Copy to clipboard">üìã Copy</button>
                </div>
                <pre class="code-block"><code>${highlightCode(sourceCode)}</code></pre>
            </div>
            
            <div class="behavior-meta">
                <span>${behavior.transitionsCount} transitions</span>
                ${behavior.hasFields ? '<span>‚úì Data Entities</span>' : ''}
                ${behavior.hasTicks ? `<span>‚è±Ô∏è ${behavior.ticksCount} tick${behavior.ticksCount > 1 ? 's' : ''}</span>` : ''}
            </div>
        </div>
    `;
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function highlightCode(code) {
        // First escape HTML
        let escaped = escapeHtml(code);

        // Apply syntax highlighting with regex
        // Keywords
        escaped = escaped.replace(/\b(export|const|let|var|function|return|if|else|true|false|null|undefined)\b/g,
            '<span class="hl-keyword">$1</span>');

        // Property names (before colons)
        escaped = escaped.replace(/([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,
            '<span class="hl-property">$1</span>:');

        // Strings (single quotes)
        escaped = escaped.replace(/'([^'\\]*(\\.[^'\\]*)*)'/g,
            '<span class="hl-string">\'$1\'</span>');

        // S-expression operators at start of arrays
        escaped = escaped.replace(/\[(<span class="hl-string">)'(set|emit|render|persist|notify|navigate|if|do|let|and|or|not|=|!=|&lt;|&gt;|&lt;=|&gt;=)'(<\/span>)/g,
            '[<span class="hl-operator">\'$2\'</span>');

        // Numbers
        escaped = escaped.replace(/\b(\d+)\b/g,
            '<span class="hl-number">$1</span>');

        // Comments (// style)
        escaped = escaped.replace(/(\/\/[^\n]*)/g,
            '<span class="hl-comment">$1</span>');

        // @ bindings
        escaped = escaped.replace(/@([a-zA-Z][a-zA-Z0-9_.]*)/g,
            '<span class="hl-binding">@$1</span>');

        return escaped;
    }

    function toggleCode(behaviorId) {
        const codeSection = document.getElementById('code-' + behaviorId);
        if (codeSection.style.display === 'none') {
            codeSection.style.display = 'block';
        } else {
            codeSection.style.display = 'none';
        }
    }

    function copyCode(behaviorId) {
        const codeSection = document.getElementById('code-' + behaviorId);
        const code = codeSection.querySelector('code').textContent;
        navigator.clipboard.writeText(code).then(() => {
            const btn = codeSection.querySelector('.copy-btn');
            btn.textContent = '‚úì Copied!';
            setTimeout(() => { btn.textContent = 'üìã Copy'; }, 2000);
        });
    }

    // Visualizer Functions
    function showVisualizer(behaviorName, button) {
        const card = button.closest('.behavior-card');
        const smData = JSON.parse(card.dataset.behavior || '{}');

        if (!smData || !smData.states || smData.states.length === 0) {
            console.warn('No state machine data for', behaviorName);
            return;
        }

        const modal = document.getElementById('visualizer-modal');
        const container = document.getElementById('visualizer-container');
        const title = document.getElementById('visualizer-title');

        title.textContent = behaviorName;

        // Use the OrbitalVisualizer from the loaded module
        if (window.OrbitalVisualizerModule && window.OrbitalVisualizerModule.OrbitalVisualizer) {
            window.OrbitalVisualizerModule.OrbitalVisualizer.renderDom(container, smData, {
                title: behaviorName
            });
        } else {
            container.innerHTML = '<p style="color: #888; text-align: center; padding: 2rem;">Visualizer not loaded</p>';
        }

        modal.classList.add('open');
        document.body.style.overflow = 'hidden';
    }

    function closeVisualizer() {
        const modal = document.getElementById('visualizer-modal');
        modal.classList.remove('open');
        document.body.style.overflow = '';
    }

    // Close modal on escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeVisualizer();
        }
    });

    // Close modal on backdrop click
    document.getElementById('visualizer-modal')?.addEventListener('click', (e) => {
        if (e.target.classList.contains('visualizer-modal')) {
            closeVisualizer();
        }
    });
</script>

<style>
    /* Mobile Search */
    .mobile-search {
        display: none;
        margin: 1.5rem 0;
    }

    .mobile-search input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid var(--border-subtle, #333);
        border-radius: 8px;
        background: var(--surface-elevated, #1a1a2e);
        color: var(--text-primary, #fff);
        font-size: 1rem;
    }

    @media (max-width: 900px) {
        .mobile-search {
            display: block;
        }
    }

    /* Category Sections */
    .category-section {
        margin-top: 3rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-subtle, #333);
    }

    .category-section:first-child {
        margin-top: 2rem;
        border-top: none;
    }

    .category-section h2 {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .category-icon {
        font-size: 1.25rem;
    }

    .category-meta {
        font-size: 0.875rem;
        color: var(--text-muted, #888);
    }

    /* Behaviors Grid */
    .behaviors-grid {
        display: grid;
        gap: 1.25rem;
        margin-top: 1.5rem;
    }

    .behavior-card {
        background: var(--surface-base, #0d0d1a);
        border-radius: 8px;
        padding: 1.5rem;
        border: 1px solid var(--border-subtle, #333);
        border-left: 3px solid var(--accent-primary, #00d4ff);
        overflow: hidden;
    }

    .behavior-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        gap: 0.75rem;
    }

    .behavior-name {
        font-size: 1.1rem;
        color: var(--accent-primary, #00d4ff);
        font-weight: 600;
    }

    .visualizer-btn {
        display: flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.35rem 0.6rem;
        border: 1px solid var(--accent-secondary, #7c3aed);
        border-radius: 4px;
        background: rgba(124, 58, 237, 0.1);
        color: var(--accent-secondary, #a78bfa);
        font-size: 0.75rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .visualizer-btn:hover {
        background: rgba(124, 58, 237, 0.25);
        border-color: #a78bfa;
        color: #fff;
    }

    .visualizer-icon {
        font-size: 0.9rem;
    }

    .behavior-description {
        color: var(--text-secondary, #ccc);
        margin: 0.5rem 0 1rem;
    }

    /* Detail Sections */
    .behavior-details {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .detail-section {
        background: var(--surface-elevated, #1a1a2e);
        border-radius: 6px;
        padding: 0.75rem;
    }

    .detail-label {
        font-size: 0.7rem;
        color: var(--text-muted, #888);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
    }

    /* Chips */
    .state-chips,
    .event-chips,
    .suggested-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .state-chip {
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
        background: rgba(0, 210, 106, 0.1);
        color: #00d26a;
        border-radius: 4px;
        font-family: 'Fira Code', monospace;
    }

    .state-chip.initial {
        background: rgba(0, 212, 255, 0.15);
        color: #00d4ff;
        font-weight: 600;
    }

    .event-chip {
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
        background: rgba(255, 184, 0, 0.1);
        color: #ffb800;
        border-radius: 4px;
        font-family: 'Fira Code', monospace;
    }

    .suggested-chip {
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
        background: rgba(138, 43, 226, 0.1);
        color: #ba68c8;
        border-radius: 4px;
    }

    /* Header Buttons */
    .header-buttons {
        display: flex;
        gap: 0.5rem;
    }

    .code-btn,
    .visualizer-btn {
        display: flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.35rem 0.6rem;
        border: 1px solid var(--accent-secondary, #7c3aed);
        border-radius: 4px;
        background: rgba(124, 58, 237, 0.1);
        color: var(--accent-secondary, #a78bfa);
        font-size: 0.75rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .code-btn {
        border-color: #58a6ff;
        background: rgba(88, 166, 255, 0.1);
        color: #58a6ff;
    }

    .code-btn:hover {
        background: rgba(88, 166, 255, 0.25);
        border-color: #79c0ff;
        color: #fff;
    }

    .visualizer-btn:hover {
        background: rgba(124, 58, 237, 0.25);
        border-color: #a78bfa;
        color: #fff;
    }

    /* Entities and Ticks Sections */
    .entities-list,
    .ticks-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .entity-item,
    .tick-item {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: baseline;
    }

    .entity-name,
    .tick-name {
        font-weight: 600;
        color: #79c0ff;
        font-size: 0.85rem;
    }

    .entity-fields {
        font-size: 0.75rem;
        color: var(--text-muted, #888);
        font-family: 'Fira Code', monospace;
    }

    .tick-interval {
        font-size: 0.75rem;
        color: #ffb86c;
        font-family: 'Fira Code', monospace;
    }

    /* Code Section */
    .code-section {
        margin-top: 1rem;
        border-radius: 8px;
        border: 1px solid #30363d;
        overflow: hidden;
        max-width: 100%;
    }

    .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 1rem;
        background: #161b22;
        border-bottom: 1px solid #30363d;
    }

    .code-label {
        font-size: 0.75rem;
        color: #8b949e;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .copy-btn {
        padding: 0.25rem 0.5rem;
        background: transparent;
        border: 1px solid #30363d;
        border-radius: 4px;
        color: #8b949e;
        font-size: 0.7rem;
        cursor: pointer;
        transition: all 0.2s;
    }

    .copy-btn:hover {
        background: #30363d;
        color: #e6edf3;
    }

    .code-block {
        margin: 0;
        padding: 1rem;
        background: #0d1117;
        overflow: auto;
        max-height: 500px;
        font-family: 'Fira Code', 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        line-height: 1.6;
        color: #e6edf3;
    }

    .code-block code {
        white-space: pre;
        display: block;
    }

    /* Syntax Highlighting */
    .hl-keyword {
        color: #ff7b72;
        font-weight: 500;
    }

    .hl-string {
        color: #a5d6ff;
    }

    .hl-property {
        color: #79c0ff;
    }

    .hl-number {
        color: #ffa657;
    }

    .hl-operator {
        color: #ff79c6;
        font-weight: 600;
    }

    .hl-comment {
        color: #8b949e;
        font-style: italic;
    }

    .hl-binding {
        color: #7ee787;
    }

    /* Behavior Meta */
    .behavior-meta {
        display: flex;
        gap: 1.25rem;
        font-size: 0.75rem;
        color: var(--text-muted, #888);
        margin-top: 1rem;
        padding-top: 0.75rem;
        border-top: 1px solid var(--border-subtle, #333);
    }

    /* Visualizer Modal */
    .visualizer-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.85);
        z-index: 9999;
        padding: 2rem;
        overflow: auto;
    }

    .visualizer-modal.open {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .visualizer-modal-content {
        background: #0d1117;
        border-radius: 12px;
        border: 1px solid #30363d;
        max-width: 95vw;
        max-height: 90vh;
        overflow: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .visualizer-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #30363d;
        background: #161b22;
        border-radius: 12px 12px 0 0;
    }

    .visualizer-header h3 {
        margin: 0;
        font-size: 1.25rem;
        color: #e6edf3;
    }

    .visualizer-close {
        background: transparent;
        border: none;
        color: #8b949e;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.25rem 0.5rem;
        line-height: 1;
        transition: color 0.2s;
    }

    .visualizer-close:hover {
        color: #f85149;
    }

    .visualizer-container {
        padding: 1rem;
        min-width: 600px;
        min-height: 400px;
    }

    @media (max-width: 768px) {
        .visualizer-modal {
            padding: 1rem;
        }

        .visualizer-modal-content {
            max-width: 100%;
            max-height: 95vh;
        }

        .visualizer-container {
            min-width: auto;
            overflow-x: auto;
        }

        .header-buttons {
            flex-direction: column;
            gap: 0.25rem;
        }
    }
</style>